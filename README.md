# 데이터베이스 테이블 및 컬럼 추출 스크립트

이 스크립트는 SQL 인젝션 공격을 통해 데이터베이스로부터 테이블 이름, 컬럼 이름 및 데이터를 추출하고, 결과를 Excel 파일로 저장하는 데 사용됩니다. **주의: 이 스크립트는 교육 및 테스트 목적으로만 사용해야 합니다. 명시적인 허가 없이 이 스크립트를 시스템에 사용하는 것은 불법이며 비윤리적입니다.**

## 사전 준비 사항

- Python 3.7 이상
- 다음 Python 라이브러리:
  - `requests`
  - `openpyxl`

필요한 패키지는 다음 명령어를 사용하여 설치할 수 있습니다:

```bash
pip install requests openpyxl
```


## 스크립트 개요
1. <b> 데이터베이스 정보에 대한 이진 탐색</b>: SQL 인젝션을 사용하여 테이블 및 컬럼 수를 효율적으로 결정하고, 테이블 및 컬럼 이름을 검색합니다.
2. <b>문자 인코딩 처리</b>: ASCII 및 한글 인코딩을 처리하여 비 ASCII 문자를 포함한 데이터베이스 내용을 정확하게 해석합니다.
3. <b>Excel 파일 생성</b>: 추출된 데이터를 openpyxl을 사용하여 Excel 파일로 저장합니다. 각 테이블은 tables 디렉토리에 별도의 Excel 파일로 저장됩니다.
4. <b>타임아웃에 대한 내구성</b>: 네트워크가 불안정한 경우에도 스크립트가 견고하게 작동하도록 타임아웃 발생 시 요청을 재시도하는 로직이 포함되어 있습니다.

## 설정 및 실행

### 설정
1. <b>쿠키 업데이트</b>: 스크립트는 인증을 위해 세션 쿠키를 사용합니다. cookies 딕셔너리에 유효한 세션 쿠키를 다음과 같이 추가

```python
cookies = {
    "JSESSIONID": "YOUR_VALID_SESSION_ID"
}
```
2. <b>대상 URL</b>: 스크립트는 SQL 인젝션이 시도될 특정 URL을 대상으로 합니다. url 변수가 올바른 엔드포인트를 가리키는지 확인

```python
url = 'URL and {}'
```
## 스크립트 실행
```bash
python script.py
```
스크립트가 데이터를 추출하기 시작하고 각 테이블의 데이터를 tables 디렉토리 아래의 개별 Excel 파일에 저장합니다. 각 Excel 파일은 테이블 이름으로 명명된 시트를 포함하며 데이터베이스에서 추출된 행과 열을 포함합니다.

## 출력
- <b>Excel 파일</b>: 각 테이블은 tables 디렉토리 내의 개별 Excel 파일로 저장됩니다. 파일 이름은 테이블 이름과 동일합니다.
- <b>콘솔 로그</b>: 스크립트는 진행 상황을 콘솔에 기록하며, 테이블 수, 컬럼 이름 및 실행 중 발생한 타임아웃이나 권한 오류 등의 문제를 표시합니다.

## 오류 처리
- <b>타임아웃</b>: 타임아웃이 발생하면 스크립트는 자동으로 요청을 재시도합니다.
- <b>권한 오류</b>: 파일 저장 시 권한 오류가 발생하면 스크립트가 오류 메시지를 기록합니다.

## 관련 게시물
https://velog.io/@wearetheone/%EB%AA%A8%EC%9D%98%ED%95%B4%ED%82%B9-%EC%88%98%EC%97%85-%EB%AA%A8%EB%93%88%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-2-%ED%95%9C%EA%B8%80-%EC%9D%B8%EC%BD%94%EB%94%A9
